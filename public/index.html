<!doctype html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <title>Youtube aggregation</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Custom Font awesome -->
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.1/angular-sanitize.min.js"></script>

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!-- angular-->
    <script src="aggregation.controller.js"></script>



    <style>

        ul
        {
            list-style-type: none;
        }
        #icon{
            color:red;


        }

        #load{
            color:white;
        }

        .table>tbody>tr>td{
            border-top:none;
        }


        .user{
            font-size:12px;


        }

        #tit{
            font-weight: bolder;
            font-size: 16px;
            color: #337ab7;
        }

        .custom {
            width: 5%;
            padding-right: 10px;
            padding-top: 5px;
            margin-left: 5px;
            align-content: center;


        }
        .link_name{
            color: #337ab7;
            font-weight: bolder;
        }

        .functions,.content{
            margin-top: 50px;
            margin-bottom:50px;

        }



        .boxed{
            border: 0px solid #ccc;
            margin-top: 10px;
            background-color: #f5f5f5;
        }

        .meta-content{
            font-size:18px;
            cursor:pointer;
            color:  #337ab7;

        }
        .meta-content:hover{
            text-decoration: underline;
        }
        .description{
            color: #337ab7;
            font-weight: bold;
            font-size:16px;
        }
        .username{
            font-size:14px;
            font-weight: bold;
            color:#337ab7;
            margin-left: 10px;
        }

        .tags{
            margin-bottom: 10px;
            margin-top:10px;
        }

        .cmt{
            margin-top:10px;
        }
    </style>




</head>
<body ng-app="aggregation" ng-controller="aggregationController" data-ng-init="init()">
<!-- top-level functions-->
<div class="container-fluid">
    <div class="row functions">
        <!--add link-->
        <div class=" col-xs-offset-1 col-md-10">
            <input type="text" name="search" placeholder="Search by tags or text" ng-model="query">
            <button class="btn btn-primary pull-right" type="button" data-toggle="modal" data-target="#Addlink"> Add a link</button>
        </div>
    </div>


    <!-- Add link model-->
    <div id="Addlink"role="dialog" aria-labelledby="addlinktitle" tabindex="-1" class="modal fade">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="addlinktitle">Add new link</h4>

                </div>

                <div class="modal-body">
                    <form ng-submit="scrapelink()">
                        <div id="url-group" class="form-group">
                            <label for="url">Paste url</label>
                            <input type="url" name="url" id="url" class="form-control" placeholder="url" ng-model="formData.url">
                            <span class="help-block"></span>
                        </div>

                        <button type="submit" class="btn btn-primary" ng-show="scraped">
                           <span data-ng-show="loading"><i class="fa fa-spinner fa-spin"></i>&nbsp;&nbsp;Scraping..</span>
                            <span data-ng-hide="loading">Scrape</span>
                        </button>
                        <div ng-hide="scraped">

                            <div id="title-group" class="form-group">
                                <label for="url">Title</label>
                                <textarea rows="3" name="title" id="title" class="form-control" placeholder="title" ng-model="formData.title"></textarea>
                                <span class="help-block"></span>
                            </div>
                            <div id="description-group" class="form-group" ng-hide="des_hide">
                                <label for="url">Description</label>
                                <textarea rows="3" name="description" id="description" class="form-control" placeholder="description" ng-model="formData.description"></textarea>
                                <span class="help-block"></span>
                            </div>

                            <div id="tag-group" class="form-group">
                                <label for="url">Tags</label>
                                <input type="text" rows="3" name="tags" id="tags" class="form-control" placeholder="Add theTags seperated by commas" ng-model="tags">
                                <span class="help-block"></span>

                            </div>

                            <button type="button" class="btn btn-primary" ng-click="addlink()" >Add

                            </button>

                        </div>

                    </form>

                </div>

            </div>

        </div>

    </div>
    <!-- end of modal-->
</div>
<div class="container-fluid" ng-show="posts.length==0">

    <div class="row">
        <div class="col-md-4 col-md-offset-4">
        <h4>No posts found for this content<br>Press Add link on the top to add posts</h4>
        </div>
    </div>

</div>

<div class="container fluid" ng-show="posts.length>0">
    <div class="row">
        <div class="col-md-10" id="LinksList" ng-controller="commentsController">
           <ul ng-repeat="post in posts| filter: query">
               <li>
                   <div class="panel panel-default">
                       <div class="panel-heading">
                           <div class="row">
                               <div class="col-md-1 custom hidden-md hidden-sm hidden-xs">
                                   <span class="align-center"><i class="fa fa-external-link-square  fa-3x" id="icon">&nbsp;</i> </span>
                               </div>
                               <div class="col-md-10">
                                   <span id="tit">{{post.title}}</span>

                                   <span><p class="user">Added by abc before 10 mins</p></span>
                               </div>
                           </div>
                       </div>

                       <div class="panel-body">

                           <div class="row">


                              <div class="col-xs-12 text-center">

                               <p ng-bind-html=trustHtml(post.embedHtml)></p>


                              </div>

                           </div>
                       </div>

                       <div class="panel-footer">


                           <span class="commentToggle meta-content" id="{{'c'+post.postId}}" onclick="commentsclick(this.id)">comments</span>&nbsp;<span class="badge">{{post.comments.length}}</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="meta-content" id="{{'t'+post.postId}}" onclick="tagsclick(this.id)">tags</span>&nbsp;<span class="badge">{{post.tags.length}}</span>
                           <div id="{{'c'+post.postId+'d'}}" class="comments">
                                    <div class="input-group cmt">
                                        <input type="text" ng-model="content" class="form-control" placeholder="Add a comment...">
                                                        <span class="input-group-btn">
                                                             <button type="button" class="btn btn-default" ng-click="addComment(post)">Comment</button>
                                                        </span>
                                    </div>

                                    <div ng-repeat="com in post.comments" class="boxed">
                                        <span class="username">{{com.userId}}</span> &nbsp;<span contenteditable="true">{{com.comment}}</span><br>
                                        <span>edit</span>


                                    </div>
                           </div>
                           <div id="{{'t'+post.postId+'d'}}" class="tags">
                               <span ng-repeat="tag in post.tags">
                                   <span class=" label label-primary">{{tag}}</span>
                               </span>


                           </div>
                       </div>
                       </div>

               </li>

           </ul>
        </div>
    </div>

<script>

    $('.comments').hide();
    $('.tags').hide();
    function commentsclick(id){

        var _id="#"+id+"d.comments";
        console.log(_id);
        $(_id).slideToggle();
    }
    function tagsclick(id){
        var _id="#"+id+"d.tags";
        console.log(_id);
        $(_id).slideToggle();
    }

</script>


</div>
</body>
</html>







